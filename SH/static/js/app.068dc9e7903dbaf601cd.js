webpackJsonp([1],{0:function(e,t,a){a("briU"),e.exports=a("NHnr")},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("xd7I"),s=a("2bvH"),o=a("H3vm");l.default.use(s.a);var r=new o.a({storage:window.localStorage}),n=new s.a.Store({state:{useName:"liubai",curContractNo:"",resultDataOrigin:[]},actions:{updateContractNo:function(e,t){var a=e.commit;e.state,a("setCurContractNo",t)},updateResultData:function(e,t){var a=e.commit;e.state,a("setResultData",t)}},mutations:{setCurContractNo:function(e,t){e.curContractNo=t},setResultData:function(e,t){e.resultDataOrigin=t}},plugins:[r.plugin]}),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=a("C7Lr")({name:"App"},i,!1,function(e){a("alRU")},null,null).exports,m=a("3XdE"),p=a("4YfN"),u=a.n(p),f=a("qqHy"),d=a.n(f),v={name:"ProcessEdit",props:["processName","contractNo","curTimeStamp","processStatus"],data:function(){return{dialogProcessVisible:!0,fileUrl:"",formFile:{fileName:"",percent:""},rulesFile:{fileName:[{required:!0,message:"请选择需要上传的文件!",trigger:"change"}],percent:[{required:!0,message:"请输入完成比例!",trigger:"change"}]},fileList:[],ifShowUpload:!1}},computed:{uploadAdr:function(){return"http://plant.fs-elliott.cn:8082/fushengJK/uploadFileZT?mulu="+this.contractNo}},watch:{curTimeStamp:{handler:function(e){this.getFileList()},deep:!0,immediate:!0}},methods:{closeDialog:function(){this.$emit("toggleProcessDialog",!1)},handleUploadSuccess:function(e){this.formFile.fileName=e.filename,this.submit(e.filename)},removeFile:function(e,t){this.formFile.fileName=""},changeFile:function(e){this.formFile.fileName=e.name},uploadFile:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$refs.upload.submit():t.$message({message:"请将信息补充完整！",type:"warning"})})},submit:function(e){var t=this,a="隐蔽验收"===this.processName||"安装调试"===this.processName?this.formFile.percent:0,l='<?xml version="1.0" encoding="utf-8"?>';l+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',l+="<soap:Body> ",l+='<PIC_UPLoad xmlns="http://tempuri.org/">',l+="<FContractNo>"+this.contractNo+"</FContractNo>",l+="<FType>"+this.processName+"</FType>",l+="<FPath>"+e+"</FPath>",l+="<FPercent>"+a+"</FPercent>",l+="</PIC_UPLoad>",l+="</soap:Body>",l+="</soap:Envelope>",this.Http.post("PIC_UPLoad",l).then(function(e){var a=e.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("PIC_UPLoadResponse")[0].getElementsByTagName("PIC_UPLoadResult")[0],s=d()(l).html();"1"===JSON.parse(s)[0].code?(t.$message({message:"上传成功!",type:"success"}),t.$emit("toggleProcessDialog",!1),t.$emit("refresh")):t.$message({message:"上传失败!",type:"error"})}).catch(function(e){console.log(e)})},getFileList:function(){var e=this,t='<?xml version="1.0" encoding="utf-8"?>';t+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',t+="<soap:Body> ",t+='<JA_LIST xmlns="http://tempuri.org/">',t+="<FSQL>select fcontractno 合同号,ftype 阶段,'http://plant.fs-elliott.cn:8082/zetian_file/'+fcontractno+'/'+fpath 文件路径,convert(varchar(50),fdate,23)fdate,isnull(fper,0)fper from Z_FILE where fcontractno='"+this.contractNo+"' and ftype='"+this.processName+"'</FSQL>",t+="</JA_LIST>",t+="</soap:Body>",t+="</soap:Envelope>",this.Http.post("JA_LIST",t).then(function(t){var a=t.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("JA_LISTResponse")[0].getElementsByTagName("JA_LISTResult")[0],s=d()(l).html(),o=JSON.parse(s);e.fileList=o.map(function(t){t.fileDate=t.fdate?t.fdate:"",t.fpercent=t.fper+"%",t.fileUrl=t["文件路径"];var a=t["文件路径"].indexOf(e.contractNo)+e.contractNo.length+1;return t.fileName=t["文件路径"].slice(a),t}),"隐蔽验收"===e.processName||"安装调试"===e.processName?e.ifShowUpload=!0:e.ifShowUpload=0===o.length}).catch(function(e){console.log(e)})},finish:function(){var e=this,t='<?xml version="1.0" encoding="utf-8"?>';t+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',t+="<soap:Body> ",t+='<jindu xmlns="http://tempuri.org/">',t+="<FContractNo>"+this.contractNo+"</FContractNo>",t+="<FType>"+this.processName+"</FType>",t+="</jindu>",t+="</soap:Body>",t+="</soap:Envelope>",this.Http.post("jindu",t).then(function(t){var a=t.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("jinduResponse")[0].getElementsByTagName("jinduResult")[0],s=d()(l).html(),o=JSON.parse(s)[0];console.log(o),"1"===o.code?(e.$message({message:"确认成功!",type:"success"}),e.$emit("toggleProcessDialog",!1),e.$emit("refresh")):e.$message({message:"确认失败!",type:"error"})}).catch(function(e){console.log(e)})},beforeUpload:function(e){},buf2hex:function(e){return Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join("")}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ProcessEdit"},[a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.processName,visible:e.dialogProcessVisible,width:"650px"},on:{close:e.closeDialog,"update:visible":function(t){e.dialogProcessVisible=t}}},[a("section",[a("p",{staticClass:"TextAlignL MarginB_10"},[a("b",[e._v("已上传的文件：")])]),e._v(" "),e.fileList.length>0?a("div",e._l(e.fileList,function(t,l){return a("p",{key:l,staticClass:"TextAlignL MarginB_10",staticStyle:{"padding-left":"15px"}},[e._v("\n          "+e._s(l+1)+".  "),a("a",{attrs:{href:t.fileUrl}},[e._v(e._s(t.fileName))]),e._v(" "),"隐蔽验收"==e.processName||"安装调试"==e.processName?a("span",{staticStyle:{float:"right",width:"50px","text-align":"right"}},[e._v(e._s(t.fpercent))]):e._e(),e._v(" "),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.fileDate))])])}),0):e._e(),e._v(" "),e.ifShowUpload&&2!=e.processStatus?a("div",[a("p",{staticClass:"TextAlignL MarginT_20"},[a("b",[e._v("上传新文件："+e._s(e.formFile.fileName))])]),e._v(" "),a("el-form",{ref:"formFile",attrs:{model:e.formFile,rules:e.rulesFile,"label-width":"100px","label-position":"left"}},[a("el-form-item",{staticClass:"TextAlignL",attrs:{label:"文件",prop:"fileName"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadAdr,accept:".pdf,.doc,.PDF",limit:1,"on-change":e.changeFile,"before-upload":e.beforeUpload,"on-remove":e.removeFile,"on-success":e.handleUploadSuccess,"auto-upload":!1},model:{value:e.formFile.fileName,callback:function(t){e.$set(e.formFile,"fileName",t)},expression:"formFile.fileName"}},[a("el-button",{attrs:{slot:"trigger",size:"small",icon:"el-icon-upload",type:""},slot:"trigger"},[e._v("请选取上传的文件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{display:"inline-block","padding-left":"10px","margin-top":"0"},attrs:{slot:"tip"},slot:"tip"},[e._v("（ 文件格式需为doc/pdf ）")])],1)],1),e._v(" "),"隐蔽验收"==e.processName||"安装调试"==e.processName?a("el-form-item",{staticClass:"TextAlignL",attrs:{label:"完成比列",prop:"percent"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.formFile.percent,callback:function(t){e.$set(e.formFile,"percent",t)},expression:"formFile.percent"}},[a("el-button",{attrs:{slot:"append"},slot:"append"},[e._v("%")])],1)],1):e._e()],1)],1):e._e()]),e._v(" "),2!=e.processStatus?a("span",{staticClass:"dialog-footer TextAlignC",staticStyle:{width:"100%",display:"inline-block"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:e.finish}},[e._v("确认完成")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.uploadFile("formFile")}}},[e._v("提 交")])],1):e._e()])],1)},staticRenderFns:[]};var g={name:"InfoDynamicTable",data:function(){return{ifEdit:!1,processName:"",curLuiCheng:"放号",processStatus:"",formBasic:{},receiptRateInfo:[],warnList:["预收款未收齐"],steps:[],curTimeStamp:"",liuCheng:["放号","合同签订","进场施工","设备到现场","隐蔽验收","安装调试","竣工验收","审价结算","项目移交","质保开始","质保结束"]}},components:{ProcessEdit:a("C7Lr")(v,b,!1,function(e){a("e1/M")},"data-v-7ea4e79c",null).exports},computed:u()({},Object(s.c)({curContractNo:function(e){return e.curContractNo}})),created:function(){this.getInfor(),this.getReceiptRate()},methods:{toggleProcessDialog:function(e){this.ifEdit=e},changeStep:function(e){switch(this.processStatus=this.steps[e].status,this.curTimeStamp=(new Date).getTime(),this.processName=this.steps[e].tit,this.steps[e].status){case 0:this.$message({message:"该流程不可进行编辑！",type:"warning"});break;case 2:this.toggleProcessDialog(!0);break;default:this.curLuiCheng!==this.steps[e].tit?this.$message({message:"请按照流程先后操作，该流程还不能进行编辑！",type:"warning"}):this.toggleProcessDialog(!0)}},getInfor:function(){var e=this,t='<?xml version="1.0" encoding="utf-8"?>';t+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',t+="<soap:Body> ",t+='<JA_LIST xmlns="http://tempuri.org/">',t+="<FSQL>SELECT * FROM Z_Contract WHERE  合同号='"+this.curContractNo+"'</FSQL>",t+="</JA_LIST>",t+="</soap:Body>",t+="</soap:Envelope>",this.Http.post("JA_LIST",t).then(function(t){var a=t.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("JA_LISTResponse")[0].getElementsByTagName("JA_LISTResult")[0],s=d()(l).html(),o=JSON.parse(s)[0];e.formBasic={contractNo:o["合同号"],projectName:o["项目名称"],signDepartment:o["部门"],customerName:o["客户"],isSigned:o["是否先签约"],swry:o["商务人员"],qyrq:o["签约日期"],htje:o["合同金额"],ysmll:"",xmjl:"",kgrq:"",wgrq:"",jsj:o["结算价"],ljkp:o["累计开票"],ljsk:o["累计收款"],chl:o["出货率"],skl:o["收款率"],jgrq:o["竣工日期"],zbq:o["质保期"],zbks:o["质保起"],zbjs:o["质保至"]},e.steps=[{status:o["放号"],date:"",tit:"放号"},{status:o["合同签订"],date:"",tit:"合同签订"},{status:o["进场施工"],date:"",tit:"进场施工"},{status:o["设备到现场"],date:"",tit:"设备到现场"},{status:o["隐蔽验收"],date:"",tit:"隐蔽验收"},{status:o["安装调试"],date:"",tit:"安装调试"},{status:o["竣工验收"],date:"",tit:"竣工验收"},{status:o["审价结算"],date:"",tit:"审价结算"},{status:o["项目移交"],date:"",tit:"项目移交"},{status:o["质保开始"],date:"",tit:"质保开始"},{status:o["质保结束"],date:"",tit:"质保结束"}];for(var r=0;r<11;r++)if(1===o[e.liuCheng[r]]){e.curLuiCheng=e.liuCheng[r];break}}).catch(function(e){console.log(e)})},getReceiptRate:function(){var e=this,t='<?xml version="1.0" encoding="utf-8"?>';t+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',t+="<soap:Body> ",t+='<JA_LIST xmlns="http://tempuri.org/">',t+="<FSQL>select c.FName,(convert(varchar(50),b.FInteger)+'%')fpercent from t_RPContract a inner join skbl b on a.FContractID=b.FContractID inner join (select FInterID,FName from t_SubMessage where FTypeID=10001) c on c.FInterID=b.FBase1 where a.FContractNo='"+this.curContractNo+"'</FSQL>",t+="</JA_LIST>",t+="</soap:Body>",t+="</soap:Envelope>",this.Http.post("JA_LIST",t).then(function(t){var a=t.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("JA_LISTResponse")[0].getElementsByTagName("JA_LISTResult")[0],s=d()(l).html(),o=JSON.parse(s);e.receiptRateInfo=o}).catch(function(e){console.log(e)})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"InfoDynamicTable"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"ModuleTit TextAlignL"},[e._v("项目信息")]),e._v(" "),a("el-form",{ref:"formBasic",staticClass:"DisabledNormal MarginT_20",staticStyle:{"padding-right":"20px"},attrs:{model:e.formBasic,"label-width":"90px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.contractNo,callback:function(t){e.$set(e.formBasic,"contractNo",t)},expression:"formBasic.contractNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.projectName,callback:function(t){e.$set(e.formBasic,"projectName",t)},expression:"formBasic.projectName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约部门"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.signDepartment,callback:function(t){e.$set(e.formBasic,"signDepartment",t)},expression:"formBasic.signDepartment"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.customerName,callback:function(t){e.$set(e.formBasic,"customerName",t)},expression:"formBasic.customerName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否先签约"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.isSigned,callback:function(t){e.$set(e.formBasic,"isSigned",t)},expression:"formBasic.isSigned"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商务人员"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.swry,callback:function(t){e.$set(e.formBasic,"swry",t)},expression:"formBasic.swry"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"签约日期"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.qyrq,callback:function(t){e.$set(e.formBasic,"qyrq",t)},expression:"formBasic.qyrq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同金额"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.htje,callback:function(t){e.$set(e.formBasic,"htje",t)},expression:"formBasic.htje"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"预算毛利率"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.ysmll,callback:function(t){e.$set(e.formBasic,"ysmll",t)},expression:"formBasic.ysmll"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目经理"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.xmjl,callback:function(t){e.$set(e.formBasic,"xmjl",t)},expression:"formBasic.xmjl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开工日期"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.kgrq,callback:function(t){e.$set(e.formBasic,"kgrq",t)},expression:"formBasic.kgrq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"完工日期"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.wgrq,callback:function(t){e.$set(e.formBasic,"wgrq",t)},expression:"formBasic.wgrq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结算价"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.jsj,callback:function(t){e.$set(e.formBasic,"jsj",t)},expression:"formBasic.jsj"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"累计开票"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.ljkp,callback:function(t){e.$set(e.formBasic,"ljkp",t)},expression:"formBasic.ljkp"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"累计收款"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.ljsk,callback:function(t){e.$set(e.formBasic,"ljsk",t)},expression:"formBasic.ljsk"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"出货率"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.chl,callback:function(t){e.$set(e.formBasic,"chl",t)},expression:"formBasic.chl"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收款率"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.skl,callback:function(t){e.$set(e.formBasic,"skl",t)},expression:"formBasic.skl"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"竣工日期"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.jgrq,callback:function(t){e.$set(e.formBasic,"jgrq",t)},expression:"formBasic.jgrq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"质保期"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.zbq,callback:function(t){e.$set(e.formBasic,"zbq",t)},expression:"formBasic.zbq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"质保起"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.zbks,callback:function(t){e.$set(e.formBasic,"zbks",t)},expression:"formBasic.zbks"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"质保至"}},[a("el-input",{attrs:{disabled:""},model:{value:e.formBasic.zbjs,callback:function(t){e.$set(e.formBasic,"zbjs",t)},expression:"formBasic.zbjs"}})],1)],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"ModuleTit TextAlignL"},[e._v("收款比例")]),e._v(" "),e.receiptRateInfo.length>0?a("section",{staticClass:"TextAlignL MarginB_10",staticStyle:{"font-size":"14px",height:"150px","overflow-y":"scroll"}},e._l(e.receiptRateInfo,function(t,l){return a("div",{key:l,staticClass:"text item",staticStyle:{padding:"5px 5px 5px 20px"}},[a("span",[e._v(e._s(l+1)+". "+e._s(t.FName))]),e._v(" "),a("span",{staticStyle:{"margin-left":"100px"}},[e._v(e._s(t.fpercent))])])}),0):a("section",{staticClass:"TextAlignL MarginB_10",staticStyle:{"font-size":"14px",height:"100px"}},[a("div",{staticStyle:{"text-align":"center","line-height":"100px"}},[e._v("暂无数据")])])])],1),e._v(" "),a("el-col",{staticClass:"TextAlignL",attrs:{span:24}},[a("span",{staticClass:"ModuleTit"},[e._v("工程项目总进度")])]),e._v(" "),a("el-col",{staticClass:"StepWrap TextAlignL",staticStyle:{width:"100%","overflow-x":"scroll"},attrs:{span:24}},e._l(e.steps,function(t,l){return a("div",{key:l,class:{SetpItem:!0,NotAllowed:-1==t.status},on:{click:function(t){return e.changeStep(l)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:l>0,expression:"idx > 0"}],class:{LineItem:!0,bgGreen:1==t.status,bgGrey:0==t.status,bgRed:2==t.status}}),e._v(" "),a("div",{staticClass:"DotItemwrap"},[a("div",{class:{DotItem:!0,bgGreen:1==t.status,bgGrey:0==t.status,bgRed:2==t.status}}),e._v(" "),a("div",{staticClass:"TextItem"},[a("p",[e._v(e._s(t.tit))]),e._v(" "),a("p",[e._v(e._s(t.date))])])])])}),0),e._v(" "),e.ifEdit?a("ProcessEdit",{attrs:{curTimeStamp:e.curTimeStamp,processStatus:e.processStatus,processName:e.processName,contractNo:e.formBasic.contractNo},on:{refresh:e.getInfor,toggleProcessDialog:e.toggleProcessDialog}}):e._e()],1)},staticRenderFns:[]};var _=a("C7Lr")(g,h,!1,function(e){a("u4AN")},"data-v-3841240b",null).exports,x={name:"FilterTable",data:function(){return{loading:!1,tableHieght:0,formFilter:{signDepartment:-1,contractPrice:-1,signYear:-1,warnTip:-1,signAndFinish:-1,fileConditionn:-1,classCondition:-1,receivablesContion:-1,performBond:-1,qualityBond:-1,shipmentRate:"",receivablesRate:"",inQuality:-1,subItems:-1,sort:"",vagueSearch:""},resultData:[],signDepartmentList:[{label:"全部",value:-1},{label:"系统集成部",value:0},{label:"济南分公司",value:1},{label:"北京分公司",value:2},{label:"昆明分公司",value:3},{label:"武汉分公司",value:4},{label:"合肥分公司",value:5}],contractPriceList:[{label:"全部",value:-1},{label:"99万元以下",value:0},{label:"100-999万元",value:1},{label:"1000-2999万元",value:2},{label:"3000万元以上",value:3}],signYearList:[{label:"全部",value:-1},{label:"2015",value:0},{label:"2016",value:1},{label:"2017",value:2},{label:"2018",value:3},{label:"2019",value:4}],warnTipList:[{label:"全部",value:-1},{label:"具有报警的项目",value:0}],signAndFinishList:[{label:"全部",value:-1},{label:"未签约先放号",value:0},{label:"签约后长期无工程信息",value:1},{label:"已完工但未竣工",value:2}],fileConditionnList:[{label:"全部",value:-1},{label:"档案全部交齐",value:0},{label:"归档未完成",value:1}],classConditionList:[{label:"全部",value:-1},{label:"精品项目",value:0},{label:"一般项目",value:1},{label:"难收尾项目",value:2}],receivablesContionList:[{label:"全部",value:-1},{label:"收款全部完成",value:0},{label:"未收预收款",value:1}],performBondList:[{label:"全部",value:-1},{label:"具有履约保证金的项目",value:0}],qualityBondList:[{label:"全部",value:-1},{label:"具有质量保证金的项目",value:0}],shipmentRateList:[],inQualityList:[{label:"全部",value:-1},{label:"无质保的项目",value:0},{label:"有质保的项目",value:1}],subItemsList:[{label:"全部",value:-1},{label:"具有分包的项目",value:0}],sortList:["按签约价","按结算价","按毛利率","按总进度","按出货率","按收款率","按商务人","按项目经理"]}},created:function(){var e=this;setTimeout(function(){var t=document.documentElement.clientHeight;document.getElementById("FilterBlock").style.height=t+"px",e.tableHieght=t},0),this.getList()},computed:u()({},Object(s.c)({resultDataOrigin:function(e){return e.resultDataOrigin}})),methods:u()({},Object(s.b)(["updateContractNo","updateResultData"]),{goDetail:function(e){this.updateContractNo(e["合同号"]),this.$router.push({name:"InfoDynamicTable"})},getList:function(){var e=this,t='<?xml version="1.0" encoding="utf-8"?>';t+='<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> ',t+="<soap:Body> ",t+='<JA_LIST xmlns="http://tempuri.org/">',t+="<FSQL>select FContractNo 合同号,b.fname 项目名称,b.FNumber 项目编号 from t_RPContract a left join t_Item_3001 b on a.fbase=b.FItemID order by FContractNo</FSQL>",t+="</JA_LIST>",t+="</soap:Body>",t+="</soap:Envelope>",this.Http.post("JA_LIST",t).then(function(t){var a=t.data,l=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("JA_LISTResponse")[0].getElementsByTagName("JA_LISTResult")[0],s=d()(l).html();e.updateResultData(JSON.parse(s))}).catch(function(e){console.log(e)})},enterEvent:function(){13===(event.keyCode?event.keyCode:event.which?event.which:event.charCode)&&this.mohuSearch()},mohuSearch:function(){if(this.formFilter.vagueSearch){this.loading=!0;var e=[],t="";this.formFilter.vagueSearch.trim().split("*").map(function(e){t=t+".*"+e});var a=new RegExp(t);this.resultDataOrigin.map(function(t,l){a.test(t["合同号"])&&e.push(t)}),this.resultData=e,this.loading=!1}else this.resultData=[]}})},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FilterTable"},[a("el-row",[a("el-col",{staticClass:"FilterBlock",attrs:{span:11,id:"FilterBlock"}},[a("section",[a("el-row",[a("el-form",{ref:"formFilter",attrs:{model:e.formFilter,"label-width":"70px","label-position":"left",size:"mini"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约部门"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.signDepartment,callback:function(t){e.$set(e.formFilter,"signDepartment",t)},expression:"formFilter.signDepartment"}},e._l(e.signDepartmentList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同金额"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.contractPrice,callback:function(t){e.$set(e.formFilter,"contractPrice",t)},expression:"formFilter.contractPrice"}},e._l(e.contractPriceList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"签约年份"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.signYear,callback:function(t){e.$set(e.formFilter,"signYear",t)},expression:"formFilter.signYear"}},e._l(e.signYearList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"报警与提示","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.warnTip,callback:function(t){e.$set(e.formFilter,"warnTip",t)},expression:"formFilter.warnTip"}},e._l(e.warnTipList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签约与竣工","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.signAndFinish,callback:function(t){e.$set(e.formFilter,"signAndFinish",t)},expression:"formFilter.signAndFinish"}},e._l(e.signAndFinishList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"归档情况"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.fileConditionn,callback:function(t){e.$set(e.formFilter,"fileConditionn",t)},expression:"formFilter.fileConditionn"}},e._l(e.fileConditionnList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分类管控"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.classCondition,callback:function(t){e.$set(e.formFilter,"classCondition",t)},expression:"formFilter.classCondition"}},e._l(e.classConditionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-row",[a("el-col",{staticClass:"TextAlignL",attrs:{span:15}},[a("el-form-item",{attrs:{label:"收款情况"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.receivablesContion,callback:function(t){e.$set(e.formFilter,"receivablesContion",t)},expression:"formFilter.receivablesContion"}},e._l(e.receivablesContionList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"履约保证金","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.performBond,callback:function(t){e.$set(e.formFilter,"performBond",t)},expression:"formFilter.performBond"}},e._l(e.performBondList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"质量保证金","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.qualityBond,callback:function(t){e.$set(e.formFilter,"qualityBond",t)},expression:"formFilter.qualityBond"}},e._l(e.qualityBondList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"出货率(大于输入数的)","label-width":"150px"}},[a("el-input",{model:{value:e.formFilter.shipmentRate,callback:function(t){e.$set(e.formFilter,"shipmentRate",t)},expression:"formFilter.shipmentRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款率(小于输入数的)","label-width":"150px"}},[a("el-input",{model:{value:e.formFilter.receivablesRate,callback:function(t){e.$set(e.formFilter,"receivablesRate",t)},expression:"formFilter.receivablesRate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"进入质保期项目","label-width":"110px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.inQuality,callback:function(t){e.$set(e.formFilter,"inQuality",t)},expression:"formFilter.inQuality"}},e._l(e.inQualityList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分包项目情况","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formFilter.subItems,callback:function(t){e.$set(e.formFilter,"subItems",t)},expression:"formFilter.subItems"}},e._l(e.subItemsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8,offset:1}},[a("section",[a("p",{staticStyle:{"text-align":"left"}},[e._v("排序")]),e._v(" "),a("div",{staticClass:"sortBlock"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"按签约价"}},e._l(e.sortList,function(t,l){return a("el-menu-item",{key:l,attrs:{index:t}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t))])])}),1)],1)]),e._v(" "),a("section",[a("p",{staticStyle:{"text-align":"left","padding-top":"5px"}},[e._v("模糊查询")]),e._v(" "),a("div",{staticClass:"vagueSearchBlock"},[a("el-input",{staticClass:"MarginT_10",attrs:{clearable:"",size:"mini"},on:{blur:e.mohuSearch},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterEvent(t)}},model:{value:e.formFilter.vagueSearch,callback:function(t){e.$set(e.formFilter,"vagueSearch",t)},expression:"formFilter.vagueSearch"}}),e._v(" "),a("P",{staticStyle:{"font-size":"12px","margin-top":"5px",padding:"0 5px"}},[e._v("可以中间夹带*来查询，*代表任意字符")])],1)])])],1)],1)],1)],1)],1)]),e._v(" "),a("el-col",{staticClass:"ResultBlock BgGray",attrs:{span:13,id:"ResultBlock"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{id:"resultTable",data:e.resultData,height:e.tableHieght,border:""},on:{"row-dblclick":e.goDetail}},[a("el-table-column",{attrs:{fixed:"",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"合同号",label:"合同号","show-overflow-tooltip":"",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"项目名称",label:"项目名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"项目编号",label:"项目编号","show-overflow-tooltip":""}})],1)],1)],1)],1)},staticRenderFns:[]};var y=a("C7Lr")(x,w,!1,function(e){a("sqd2")},"data-v-58d1af7c",null).exports,C={name:"Contract",data:function(){return{formContract:{constructionTeam:"",department:"",payTerm:"",salesman:"",contractDate:"",contractName:"",contractNo:"",productionCode:"",affiliatedCompany:"",productionProgress:""},formAdd:{list:[{pcode:"CODE1",pname:"产品名称1",pmodel:"规格型号1",pamount:"",pprice:"",psum:"",pnote:"",punit:"件"}]},productionCodeList:[{value:"CODE1",label:"CODE1"},{value:"CODE2",label:"CODE2"}],productionNumber:[{value:"项目编号1",label:"项目编号1"},{value:"项目编号2",label:"项目编号2"}],constructionTeamList:[{value:"施工1队",label:"施工1队"}],payTermList:[{value:"付款条件1",label:"付款条件1"}],departmentList:[{value:"市场部",label:"市场部"}],salesmanList:[{value:"张三",label:"张三"}],companyeList:[{value:"上海旺策尔信息科技有限公司",label:"上海旺策尔信息科技有限公司"}],progressList:[{value:"完工",label:"完工"}]}},computed:{},created:function(){},methods:{addLine:function(){this.formAdd.list.push({pcode:"",pname:"",pmodel:"",pamount:"",pprice:"",psum:"",pnote:"",punit:""})},changePCode:function(e){console.log(e)}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Contract"},[a("h2",{staticClass:"MarginT_20 MarginB_20"},[e._v("合同（应收）")]),e._v(" "),a("el-row",{staticClass:"MarginT_20"},[a("el-form",{ref:"formContract",staticStyle:{"padding-right":"20px"},attrs:{model:e.formContract,"label-width":"90px",size:"small"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同日期"}},[a("el-date-picker",{attrs:{prop:"contractDate",type:"date",placeholder:"选择日期"},model:{value:e.formContract.contractDate,callback:function(t){e.$set(e.formContract,"contractDate",t)},expression:"formContract.contractDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同名称",prop:"contractName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formContract.contractName,callback:function(t){e.$set(e.formContract,"contractName",t)},expression:"formContract.contractName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同号",prop:"contractNo"}},[a("el-input",{attrs:{clearable:""},model:{value:e.formContract.contractNo,callback:function(t){e.$set(e.formContract,"contractNo",t)},expression:"formContract.contractNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"施工队",prop:"constructionTeam"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.formContract.constructionTeam,callback:function(t){e.$set(e.formContract,"constructionTeam",t)},expression:"formContract.constructionTeam"}},e._l(e.constructionTeamList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"付款条件",prop:"payTerm"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formContract.payTerm,callback:function(t){e.$set(e.formContract,"payTerm",t)},expression:"formContract.payTerm"}},e._l(e.payTermList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"部门",prop:"department"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formContract.department,callback:function(t){e.$set(e.formContract,"department",t)},expression:"formContract.department"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务员",prop:"salesman"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formContract.salesman,callback:function(t){e.$set(e.formContract,"salesman",t)},expression:"formContract.salesman"}},e._l(e.salesmanList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目编号",prop:"productionCode"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.formContract.productionCode,callback:function(t){e.$set(e.formContract,"productionCode",t)},expression:"formContract.productionCode"}},e._l(e.productionNumber,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属公司",prop:"affiliatedCompany"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formContract.affiliatedCompany,callback:function(t){e.$set(e.formContract,"affiliatedCompany",t)},expression:"formContract.affiliatedCompany"}},e._l(e.companyeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"项目进度",prop:"productionProgress"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formContract.productionProgress,callback:function(t){e.$set(e.formContract,"productionProgress",t)},expression:"formContract.productionProgress"}},e._l(e.progressList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"listColumnTit"},[a("el-col",{attrs:{span:1}},[a("span",[e._v("行号")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("产品代码")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("产品名称")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("规格型号")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",[e._v("数量")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("含税单价")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("价税合计")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("备注")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v("计量单位")])])],1),e._v(" "),e._l(e.formAdd.list,function(t,l){return a("el-row",{key:l,staticClass:"listTable"},[a("el-col",{staticStyle:{background:"lightsteelblue"},attrs:{span:1}},[a("span",[e._v(e._s(l+1))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"95%",margin:"0 auto"},attrs:{filterable:"",size:"mini",placeholder:"请选择"},on:{change:e.changePCode},model:{value:t.pcode,callback:function(a){e.$set(t,"pcode",a)},expression:"Record.pcode"}},e._l(e.productionCodeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v(e._s(t.pname))])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v(e._s(t.pmodel))])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-input",{staticStyle:{width:"95%",margin:"0 auto"},attrs:{size:"mini",clearable:""},model:{value:t.pamount,callback:function(a){e.$set(t,"pamount",a)},expression:"Record.pamount"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{width:"95%",margin:"0 auto"},attrs:{size:"mini",clearable:""},model:{value:t.pprice,callback:function(a){e.$set(t,"pprice",a)},expression:"Record.pprice"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{width:"95%",margin:"0 auto"},attrs:{size:"mini",clearable:""},model:{value:t.psum,callback:function(a){e.$set(t,"psum",a)},expression:"Record.psum"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{width:"95%",margin:"0 auto"},attrs:{size:"mini",clearable:""},model:{value:t.pnote,callback:function(a){e.$set(t,"pnote",a)},expression:"Record.pnote"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("span",[e._v(e._s(t.punit))])])],1)}),e._v(" "),a("section",{staticClass:"MarginT_20"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addLine}},[e._v("新增一行")])],1)],2)},staticRenderFns:[]};var S=a("C7Lr")(C,k,!1,function(e){a("VdfU")},"data-v-7a09a63e",null).exports;l.default.use(m.a);var F=new m.a({routes:[{path:"/InfoDynamicTable",name:"InfoDynamicTable",component:_,meta:{requireAuth:!1}},{path:"/",name:"FilterTable",component:y,meta:{requireAuth:!1}},{path:"/Contract",name:"Contract",component:S,meta:{requireAuth:!1}}]}),L=a("cHER"),B=a.n(L),N=(a("SO90"),a("rVsN")),T=a.n(N),D=a("84iU"),$=a.n(D);a("HzJ8"),a("hRKE"),a("ZLEe"),a("MgeX"),a("mgIi");function I(){return window.localStorage&&(window.localStorage.setItem("a",123),123===window.localStorage.getItem("a"))}function E(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null}var R={local:{set:function(e,t){if(I())window.localStorage.setItem(e,t);else{var a=new Date;a.setTime(a.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()}},get:function(e){return I()?window.localStorage.getItem(e)?window.localStorage.getItem(e):null:E(e)},clear:function(e){if(I())window.localStorage.removeItem(e);else{var t=new Date;t.setTime(t.getTime()-1);var a=E(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}}}},A="http://111.231.134.126:8090/Service1.asmx",P=$.a.CancelToken.source();function j(e,t,a){var l=Date.now();return R.local.get("token")&&($.a.defaults.headers.common.token=R.getLocal("token")),new T.a(function(s,o){$()({method:e,url:""+A,crossDomain:!0,headers:{"content-Type":"text/xml; charset=utf-8",SOAPAction:"http://tempuri.org/"+t,"X-Timestamp":l},cancelToken:P.token,data:a}).then(function(e){s(e)}).catch(function(e){o(e.message)})})}$.a.interceptors.request.use(function(e){return e}),$.a.interceptors.response.use(function(e){return e},function(e){if(e.response){var t=e.response.data;switch(n.dispatch("toggleLoadingBt",!1),e.response.status){case 403:L.Message.error({message:"拒绝访问!"});break;case 500:"Token失效，请重新登录"===t.message&&L.Message.error({message:"很抱歉，登录已过期，请重新登录!"});break;case 404:L.Message.error({message:"很抱歉，资源未找到!"});break;case 504:L.Message.error({message:"网络超时!"});break;case 401:L.Message.error({message:"未授权，请重新登录!"});break;default:L.Message.error({message:t.message+"!"})}}return T.a.reject(e)});var M={post:function(e,t){return j("post",e,t)}};a("WEav");l.default.config.productionTip=!1,l.default.prototype.Http=M,l.default.use(B.a),l.default.use(s.a),new l.default({el:"#app",store:n,router:F,components:{App:c},template:"<App/>"})},SO90:function(e,t){},VdfU:function(e,t){},WEav:function(e,t){},alRU:function(e,t){},"e1/M":function(e,t){},sqd2:function(e,t){},u4AN:function(e,t){}},[0]);
//# sourceMappingURL=app.068dc9e7903dbaf601cd.js.map